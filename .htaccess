#
# Apache/PHP settings:
#

# Don't show directory listings for URLs which map to a directory.
Options -Indexes

# Follow symbolic links in this directory.
Options +FollowSymLinks

# Multiviews creates problems with aliased URLs and is not needed for this site.
Options -Multiviews

# Set the default handler.
DirectoryIndex index.php index.html index.htm

# Force simple error message for requests for non-existent favicon.ico.
<Files favicon.ico>
	ErrorDocument 404 "The requested file favicon.ico was not found."
</Files>

# Override PHP settings that cannot be changed at runtime.

# PHP 5, Apache 1 and 2.
<IfModule mod_php5.c>
	php_flag magic_quotes_gpc                 off
	php_flag magic_quotes_sybase              off
	php_flag register_globals                 off
	php_flag session.auto_start               off
	php_value mbstring.http_input             pass
	php_value mbstring.http_output            pass
	php_flag mbstring.encoding_translation    off
</IfModule>

# Various rewrite rules.
<IfModule mod_rewrite.c>
	RewriteEngine on

	# Modify the RewriteBase if you are using the site in a subdirectory or in a
	# VirtualDocumentRoot and the rewrite rules are not working properly.
	# For example if your site is at http://example.com/azerty/ uncomment and
	# modify the following line:
	RewriteBase /~matthieusieben/Sedra.framework

	# Less CSS files
	RewriteCond %{REQUEST_FILENAME} -f
	RewriteRule ^(css/.*\.less)$ index.php?q=$1 [L,QSA]

	# Pass all requests not referring directly to files in the filesystem to
	# index.php.
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteCond %{REQUEST_FILENAME} !-d
	RewriteCond %{REQUEST_URI} !=/favicon.ico
	RewriteRule ^(.*)$ index.php?q=$1 [L,QSA]

	# Protect files and directories from prying eyes.
	RewriteRule ^((system|site).*(\.php|\.inc|\.ini|\.html|\.htm|/))$ index.php?q=$1 [L,QSA]
</IfModule>
